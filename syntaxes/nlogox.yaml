name: NetLogo XML Model
scopeName: source.nlogox

patterns:
- include: "#code-block"
- include: "#markdown-block"
- include: "text.xml"

repository:
  code-block:
    name: source.netlogo.code
    begin: '(<code><!\[CDATA\[)(.*)'
    beginCaptures:
      "1":
        name: punctuation.definition.tag.xml
      "2":
        name: source.netlogo.code.begin
        patterns:
        - include: source.netlogo
    end: '(.*)(\]\]></code>)'
    endCaptures:
      "1":
        name: source.netlogo.code.end
        patterns:
        - include: source.netlogo
      "2":
        name: punctuation.definition.tag.xml
    patterns:
    - include: source.netlogo
  markdown-block:
    name: text.html.markdown
    begin: '(<info><!\[CDATA\[)(.*)'
    beginCaptures:
      "1":
        name: punctuation.definition.tag.xml
      "2":
        name: text.html.markdown.begin
        patterns:
        - include: text.html.markdown
    end: '(.*)(\]\]></info>)'
    endCaptures:
      "1":
        name: text.html.markdown.end
        patterns:
        - include: text.html.markdown
      "2":
        name: punctuation.definition.tag.xml
    patterns:
    - include: text.html.markdown
